#!/bin/bash

# commit message input string
MESSAGE=$(cat $1)
# list of valid commit type
COMMITFORMAT="^(feat|fix|docs|style|refactor|test|chore|perf|build|ci|revert): .{1,255}$"

if ! [[ "$MESSAGE" =~ $COMMITFORMAT ]]; then
    bold=$(tput bold)
    echo ""
    echo "ğŸ›‘ ${bold}Please follow standard commit format ğŸ›‘"
    echo ""
    normal=$(tput sgr0)
    echo "ğŸ‘‰ ${normal}SAMPLE FORMAT :  git commit -m 'feat: this is new feature'"
    echo ""
    echo "â„¹ï¸  DESCRIPTION   :  Start with valid type followed by colon space then description"
    echo ""
    echo "ğŸ“¢ VALID TYPE    :  [feat|fix|docs|style|refactor|test|chore|perf|build|ci|revert]"
    echo ""
    echo "ğŸ”” Please correct it and commit againâ—"
    echo ""
    exit 1
fi
if [[ "$MESSAGE" =~ $COMMITFORMAT ]]; then
    echo ""
    echo "ğŸ†— Commit Successful âœ…"
    exit 0
fi
